$(document).ready(function(){
  // =================================================  
  // handles showing/hiding based on Social Media Type
  // -------------------------------------------------
  function handleSectionsVisibility() {
    let smType = $("select#sm_service_sm_type option:checked").val();
    if(smType === 'Facebook' || smType === 'Instagram'){
      $(".fb-sm-services").show();
      $("#sm_name_section").hide();  // Hide if Facebook or Instagram
    } else {
      $(".fb-sm-services").hide();
      $("#sm_name_section").show();  // Show for other types
        
      // ===================================================  
      // Clear the data in the Remote Page ID and Name field
      // ---------------------------------------------------
      $('#sm_service_remote_page_id').val('');
      $('#sm_form_name').val('');
    }
  }
  // ===================================================
  // Call the function on page load to set initial state
  // ---------------------------------------------------  
  handleSectionsVisibility();

  // ==============
  // On form submit
  // --------------  
  $('#sm_service').on('submit', function() {
    if($("select#sm_service_sm_type option:checked").val() === 'Facebook'){
      if($('#sm_service_sm_account_name').val().length === 0){
        alert('Social Media Account Must be Selected to Create Service');
        return false;
      }
    }
  });

  // ===========================
  // On Social Media Type change
  // ---------------------------  
  $("#sm_service_sm_type").change(function() {
    handleSectionsVisibility();
  });
});
